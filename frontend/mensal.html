<!DOCTYPE html>
<!--
  Sistema de Escala Mensal - PMES
  VersÃ£o: 1.0.0
-->
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Escala Mensal - PMES</title>
  <link href="https://fonts.googleapis.com/css2?family=Carlito:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
  
  <style>
    /* === ESTILOS ESPECÃFICOS ESCALA MENSAL === */
    .print-table { 
      width: 100% !important; 
      border-collapse: collapse !important; 
      table-layout: fixed !important; 
      font-size: 11px !important;
    }

    .print-table td, .print-table th { 
      border: 1px solid #000 !important;
      padding: 0 2px !important; 
      vertical-align: middle !important;
      line-height: 1.1 !important; 
    }

    .print-table tr { height: 20px !important; }
    .overlap-top { margin-top: -1px !important; }
    .bg-pm-gold { background-color: #FFD966 !important; }
    .bg-pm-red { background-color: #f8d7da !important; }
    .bg-pm-green { background-color: #d4edda !important; }

    @media print {
      @page { size: A4 landscape; margin: 5mm; }
      body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      .no-print { display: none !important; }
      #documento { box-shadow: none !important; margin: 0 !important; width: 100% !important; max-width: 100% !important; }
      .print-header-text p { margin: 2px 0; }
    }
  </style>
</head>

<body>

  <!-- NAVBAR -->
  <nav class="navbar no-print">
    <div class="navbar-content" style="max-width: 1400px;">
      <div class="navbar-brand">
        ğŸ“‹ Escala Mensal
        <span class="navbar-version">v1.0.0</span>
      </div>
      <div class="navbar-menu">
        <span id="navbarUser" class="navbar-user"></span>
        <a href="/mensal.html" class="btn btn-active">ğŸ“… Mensal</a>
        <a href="/iseo.html" class="btn btn-secondary">ğŸ“‹ ISEO</a>
        <a href="/admin.html" id="adminMenu" class="btn btn-secondary hidden">âš™ï¸ Admin</a>
        <button onclick="logout()" class="btn btn-secondary">ğŸšª Sair</button>
      </div>
    </div>
  </nav>

  <!-- BARRA DE CONTROLE -->
  <div class="no-print" style="background: var(--pm-blue); padding: 12px;">
    <div style="max-width: 1400px; margin: 0 auto; display: flex; justify-content: center; gap: 16px;">
      <button id="btnEditar" class="btn btn-active">ğŸ–Šï¸ EdiÃ§Ã£o</button>
      <button id="btnVisualizar" class="btn btn-secondary">ğŸ‘ï¸ Visualizar</button>
      <button onclick="window.print()" class="btn btn-success">ğŸ–¨ï¸ Imprimir/PDF</button>
    </div>
  </div>

  <!-- MODO EDIÃ‡ÃƒO -->
  <div id="modoEdicao" class="no-print" style="max-width: 1200px; margin: 24px auto; padding: 0 16px;">

    <!-- Tabs -->
    <div style="display: flex; border-bottom: 1px solid #ddd; margin-bottom: 24px;">
      <button class="tab-btn active" data-tab="config">âš™ï¸ ConfiguraÃ§Ãµes</button>
      <button class="tab-btn" data-tab="militares">ğŸ‘¥ Militares</button>
      <button class="tab-btn" data-tab="equipes">ğŸ“‹ Equipes</button>
      <button class="tab-btn" data-tab="observacoes">ğŸ“ ObservaÃ§Ãµes</button>
    </div>

    <!-- Tab: ConfiguraÃ§Ãµes -->
    <div id="tab-config" class="tab-content active card">
      <h2 style="font-size: 18px; margin-bottom: 16px;">âš™ï¸ ConfiguraÃ§Ãµes Gerais</h2>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
        <div>
          <h3 style="font-size: 14px; font-weight: bold; margin-bottom: 8px;">ğŸ“… PerÃ­odo da Escala</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
            <div>
              <label style="font-size: 12px; color: #666;">MÃªs InÃ­cio</label>
              <select id="mesInicio" class="form-select">
                <option value="0">Janeiro</option>
                <option value="1">Fevereiro</option>
                <option value="2">MarÃ§o</option>
                <option value="3">Abril</option>
                <option value="4">Maio</option>
                <option value="5">Junho</option>
                <option value="6">Julho</option>
                <option value="7">Agosto</option>
                <option value="8">Setembro</option>
                <option value="9">Outubro</option>
                <option value="10">Novembro</option>
                <option value="11">Dezembro</option>
              </select>
            </div>
            <div>
              <label style="font-size: 12px; color: #666;">Ano</label>
              <input type="number" id="anoEscala" class="form-input" value="2026" min="2020">
            </div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px;">
            <div>
              <label style="font-size: 12px; color: #666;">Dia InÃ­cio</label>
              <input type="number" id="diaInicio" class="form-input" value="15" min="1" max="31">
            </div>
            <div>
              <label style="font-size: 12px; color: #666;">Dia Fim</label>
              <input type="number" id="diaFim" class="form-input" value="15" min="1" max="31">
            </div>
          </div>
          <h4 style="font-size: 13px; font-weight: bold; margin-top: 12px; margin-bottom: 4px;">ğŸ”„ Offset D/N por Equipe</h4>
          <p style="font-size: 11px; color: #666; margin-bottom: 4px;">0=D, 1=N, 2=1Âª folga, 3=2Âª folga, 4=3Âª folga</p>
          <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; font-size: 12px;">
            <div><label>A <span id="legA" style="font-weight: bold; color: var(--pm-blue);"></span></label><input type="number" id="offsetA" class="form-input" value="1" min="0" max="4" oninput="atualizarLegenda(this, 'legA')"></div>
            <div><label>B <span id="legB" style="font-weight: bold; color: var(--pm-blue);"></span></label><input type="number" id="offsetB" class="form-input" value="0" min="0" max="4" oninput="atualizarLegenda(this, 'legB')"></div>
            <div><label>C <span id="legC" style="font-weight: bold; color: var(--pm-blue);"></span></label><input type="number" id="offsetC" class="form-input" value="4" min="0" max="4" oninput="atualizarLegenda(this, 'legC')"></div>
            <div><label>D <span id="legD" style="font-weight: bold; color: var(--pm-blue);"></span></label><input type="number" id="offsetD" class="form-input" value="3" min="0" max="4" oninput="atualizarLegenda(this, 'legD')"></div>
            <div><label>E <span id="legE" style="font-weight: bold; color: var(--pm-blue);"></span></label><input type="number" id="offsetE" class="form-input" value="2" min="0" max="4" oninput="atualizarLegenda(this, 'legE')"></div>
          </div>
        </div>

        <div>
          <h3 style="font-size: 14px; font-weight: bold; margin-bottom: 8px;">ğŸ›ï¸ CabeÃ§alho</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 8px;">
            <div>
              <label style="font-size: 12px; color: #666;">BrasÃ£o Esquerdo</label>
              <input type="file" id="brasaoEsqFile" accept="image/*" class="form-input" style="font-size: 12px;" onchange="carregarBrasao('esq')">
            </div>
            <div>
              <label style="font-size: 12px; color: #666;">BrasÃ£o Direito</label>
              <input type="file" id="brasaoDirFile" accept="image/*" class="form-input" style="font-size: 12px;" onchange="carregarBrasao('dir')">
            </div>
          </div>
          <input type="text" id="headerLinha1" class="form-input mb-2" value="ESTADO DO ESPÃRITO SANTO">
          <input type="text" id="headerLinha2" class="form-input mb-2" value="POLÃCIA MILITAR">
          <input type="text" id="headerLinha3" class="form-input mb-2" value="3Âº COMANDO DE POLÃCIA OSTENSIVA REGIONAL">
          <input type="text" id="headerLinha4" class="form-input mb-2" value="COPOM">
          <input type="text" id="headerLema" class="form-input" value='"Policial Militar, herÃ³i protetor da sociedade"'>
        </div>

        <div>
          <h3 style="font-size: 14px; font-weight: bold; margin-bottom: 8px;">âœï¸ Assinatura</h3>
          <input type="text" id="assinaturaNome" class="form-input mb-2" placeholder="Nome" value="HERYCK CARNEIRO VIRGÃNIO">
          <input type="text" id="assinaturaPosto" class="form-input mb-2" placeholder="Posto" value="MAJ QOCPM">
          <input type="text" id="assinaturaInfo" class="form-input" placeholder="RG/NF/Cargo" value="RG 19.393-7/NF 883004 - CMT DO COPOM/SUL 3ÂºCPOR">
        </div>

        <div>
          <h3 style="font-size: 14px; font-weight: bold; margin-bottom: 8px;">ğŸ“ RodapÃ©</h3>
          <input type="text" id="footerLema" class="form-input mb-2" value='"PolÃ­cia Militar, patrimÃ´nio do povo capixaba".'>
          <textarea id="footerEndereco1" class="form-input mb-2" style="height: 64px;">Centro de OperaÃ§Ãµes Policiais Militares - COPOM/3Âº CPOR - Av. Nossa Senhora da ConsolaÃ§Ã£o, 234, Vila Rica, Cachoeiro de Itapemirim/ES, CEP 29.301-080</textarea>
          <input type="text" id="footerEndereco2" class="form-input" value="Telefone: (28) 3515-3370 - e-mail: chefeda.cpos@pm.es.gov.br">
        </div>
      </div>

      <div class="mt-4">
        <button onclick="salvarTudo()" class="btn btn-primary">ğŸ’¾ Salvar Tudo</button>
      </div>
      <p class="footer">Â© 2026 Self-Labs. Todos os direitos reservados.</p>
    </div>